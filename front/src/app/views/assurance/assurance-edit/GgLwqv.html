<!DOCTYPE html>
<!-- saved from url=(0046)https://cdpn.io/MindyTomlinson/fullpage/GgLwqv -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link rel="apple-touch-icon" type="image/png" href="https://static.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png">
<meta name="apple-mobile-web-app-title" content="CodePen">
<link rel="shortcut icon" type="image/x-icon" href="https://static.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico">
<link rel="mask-icon" type="" href="https://static.codepen.io/assets/favicon/logo-pin-8f3771b1072e3c38bd662872f6b673a722f4b3ca2421637d5596661b4e2132cc.svg" color="#111">
<title>CodePen - Loan Calculator</title>
<link href="./css" rel="stylesheet" type="text/css">
<style>
.input-wrapper {
  display: flex;
  flex-flow: row nowrap;
  box-shadow: inset 0px 1px 2px #222;
  background-color: #39537b;
  border-radius: 4px;
  margin-top: 0.2em;
  margin-bottom: 1.2em;
}

.input-field {
  flex: 1;
  border: 0;
  font-size: 1.1em;
  font-weight: 600;
}

.input-wrapper:hover {
  box-shadow: inset 1px 2px 2px #222;
  transition: box-shadow 0.1s ease;
}

input:focus, button:focus {
  outline:none;
}

.input-field {
  flex: 1;
  border: 0;
  font-size: 1.1em;
  font-weight: 600;
}

.input-field,
.input-addon {
  padding: 0.5em 0.75em;
  color: #89DDFF;
  letter-spacing: 1px;
}

.input-field:not(first-child) {
    border-left: 1px solid rgba(34,34,34,0.1);
}
.input-field:not(last-child) {
    border-right: 1px solid rgba(34,34,34,0.1);
}

.input-addon {
  font-variant: small-caps;
}

input {
  background-color: transparent;
}

button {
  background-color: #89DDFF;
  border: 0;
  border-radius: 4px;
  box-shadow: 0px 2px 4px #222;
  font-size: 1.2em;
  font-variant: small-caps;
  font-weight: 600;
  letter-spacing: 0.6px;
  color: #23395B;
  padding: 0.5em 0.8em;
  margin-top: 0.6em;
  margin-bottom: 1em;
}

button:hover {
  box-shadow: 3px 6px 6px #222;
  transition: box-shadow 0.05s ease;
  cursor: pointer;
}

.label {
  font-variant: small-caps;
  font-size: 1.1em;
  letter-spacing: 1px;
}

.output-value {
  color: #89DDFF;
  letter-spacing: 1px;
  font-weight: 600;
  font-size: 2em;
  margin-bottom: 0.6em;
}

canvas {
  width: 100%;
  height: auto;
  background-color: #F7F7F7;
}

.container {
  margin: auto;
  width: 80%;
  max-width: 620px;
}

.row {
  display: flex;
  flex-flow: row nowrap;
}

.col-main {
  flex: 1;
}

.col:first-child {
  padding-right: 3em;
}

h2 {
  color: #40FD65;
  font-size: 1.6em;
  font-variant: small-caps;
  letter-spacing: 1px;
  margin: 0;
  padding-top: 1em;
  padding-bottom: 0.2em;
}

h1 {
  color: #40FD65;
  font-size: 3.6em;
  font-variant: small-caps;
  letter-spacing: 1px;
  margin: 0;
  padding-top: 0.4em;
}

p {
  margin: 0;
}

footer {
  height: 2em;
}

canvas {
  background-color: #fff;
  border-radius: 4px 4px 0 0;
}

.legend {
  display: flex;
  flex-flow: row wrap;
  justify-content: center;
  background-color: #fff;
  border-radius: 0 0 4px 4px;
  border-top: 1px solid #ccc;
  padding: 8px 8px 10px 8px;
  position: relative;
  top: -5px;
}

.legend-item {
  margin-right: 16px;
}
.legend-item > div {
  display: inline-block;
}
.legend-swatch {
  height: 12px;
  width: 12px;
  border-radius: 4px;
  position: relative;
  top: 2px;
}

.legend-label {
  font-size: 0.7em;
  color: #23395B;
/*  font-variant: small-caps;
  letter-spacing: 0.03em;*/
}

#total-interest-payments-swatch {
  background-color: #72AAD0;
}

#total-equity-swatch {
  background-color: #40FD65;
}

#loan-balance-swatch {
  background-color: #444;
}

@media (max-width: 565px) {
  .row {
    flex-flow: column;
  }
  .col:first-child {
    padding-right: 0;
  }
  h1 {
    font-size: 2.4em;
  }
}

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background-color: #23395B;
  font-family: 'Open Sans', sans-serif;
  color: #72AAD0;
}

html {
  box-sizing: border-box;
}
*, *:before, *:after {
  box-sizing: inherit;
}
</style>
<script>
  window.console = window.console || function(t) {};
</script>
<script>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
</script>
</head>
<body translate="no">
<div class="container">
<h1>Loan Calculator</h1>
<div class="row">
<div class="col col-main">
<h2>Enter Loan Data</h2>
<label for="amount" class="label">Amount of the loan</label>
<div class="input-wrapper">
<span class="input-addon">$</span>
<input id="amount" class="input-field" type="text" value="100,000">
</div>
<label for="apr" class="label">Annual interest rate</label>
<div class="input-wrapper">
<input id="apr" class="input-field" type="text" value="5">
<span class="input-addon">%</span>
</div>
<label for="years" class="label">Repayment period</label>
<div class="input-wrapper">
<input id="years" class="input-field" type="text" value="20">
<span class="input-addon">years</span>
</div>
<label for="zipcode" class="label">Zipcode (to find lenders)</label>
<div class="input-wrapper">
<input id="zipcode" class="input-field" type="text">
</div>
<button onclick="calculate();">Calculate</button>
</div>
<div class="col">
<h2>Payments</h2>
<div class="output-wrapper">
<p class="label">Monthly payment</p>
<p class="output-value">$<span id="payment"></span></p>
</div>
<div class="output-wrapper">
<p class="label">Total payments</p>
<p class="output-value">$<span id="total"></span></p>
</div>
<div class="output-wrapper">
<p class="label">Total interest payments</p>
<p class="output-value">$<span id="totalinterest"></span></p>
</div>
</div>
</div>
<h2>Balance vs. Payments</h2>
<canvas id="graph"></canvas>
<div class="legend">
<div class="legend-item">
<div class="legend-swatch" id="total-interest-payments-swatch"></div>
<div class="legend-label">Total Interest Payments</div>
</div>
<div class="legend-item">
<div class="legend-swatch" id="total-equity-swatch"></div>
<div class="legend-label">Total Equity</div>
</div>
<div class="legend-item">
<div class="legend-swatch" id="loan-balance-swatch"></div>
<div class="legend-label">Loan Balance</div>
</div>
</div>
<footer></footer>
</div>
<script src="./stopExecutionOnTimeout-9bf952ccbbd13c245169a0a1190323a27ce073a3d304b8c0fdf421ab22794a58.js.téléchargement"></script>
<script id="rendered-js">
"use strict";

function calculate() {
  // Look up the input and output elements in the document
  var amount = document.getElementById("amount");
  var apr = document.getElementById("apr");
  var years = document.getElementById("years");
  var zipcode = document.getElementById("zipcode");
  var payment = document.getElementById("payment");
  var total = document.getElementById("total");
  var totalinterest = document.getElementById("totalinterest");

  // Get the user's input from the input elements.
  // Assume all input is valid (for now).
  // Convert interest rate from percentage to decimal
  // Convert from annual rate to monthly rate
  // Convert payment period in years to number of monthly payments
  var principal = parseFloat(amount.value.replace(/,/g, ''));
  var rate = parseFloat(apr.value) / 100 / 12;
  var payments = parseFloat(years.value) * 12;

  // Compute the monthly payment
  var x = Math.pow(1 + rate, payments);
  var monthly = principal * x * rate / (x - 1);

  // If the result is a finite number, the user's input was good
  // and we have meaningful results to display
  if (isFinite(monthly)) {
    // Fill in the output fields, rounding to 2 decimal places
    payment.innerHTML = formatNumber(monthly, 2);
    total.innerHTML = formatNumber(monthly * payments, 2);
    totalinterest.innerHTML = formatNumber(monthly * payments - principal, 2);

    // Finally, chart loan balance, interest, and equity payments
    chart(principal, rate, monthly, payments);
  } else
  {
    // Result was NaN or Infinite, 
    // which means the input was incomplete or invalid.
    // Clear any previously-displayed output.
    payment.innerHTML = "";
    total.innerHTML = "";
    totalinterest.innerHTML = "";
    chart(); // With no arguments, clears the chart
  }
}

// Chart the monthly loan balance, interest, and
// equity in an HTML <canvas> element.
// If called with no arguments, then just erase
// any previously drawn chart.
function chart(principal, rate, monthly, payments) {
  var graph = document.getElementById("graph");
  graph.width = graph.width; // Magic to clear and reset the canvas element

  // If we're called with no arguments, 
  // or if the browser does not support graphics
  // in a <canvas> element, then just return now.
  if (arguments.length === 0 || !graph.getContext) return;

  // Get the "context" object for the <canvas>
  // that defines the API
  // All drawing is done with this object
  var g = graph.getContext("2d");

  var width = graph.width,height = graph.height; // Get canvas size

  // These functions convert payment numbers
  // and dollar amounts to pixels
  function paymentToX(n) {
    return n * width / payments;
  }
  function amountToY(a) {
    return height - a * height / (monthly * payments * 1.05);
  }

  // Payments are a straight line from (0,0)
  // to (payments, monthly * payments)
  g.moveTo(paymentToX(0), amountToY(0)); // Start at lower left
  g.lineTo(paymentToX(payments), // Draw to upper right
  amountToY(monthly * payments));
  g.lineTo(paymentToX(payments), amountToY(0)); // Down to lower right
  g.closePath(); // And back to start
  g.fillStyle = "#72AAD0"; // Light blue
  g.fill(); // Fill the triangle

  // Cumulative equity is non-linear and trickier to chart
  var equity = 0;
  g.beginPath();
  g.moveTo(paymentToX(0), amountToY(0)); // Start at lower left
  for (var p = 1; p <= payments; p++) {if (window.CP.shouldStopExecution(0)) break;
    // For each payment, figure out how much is interest
    var thisMonthsInterest = (principal - equity) * rate;
    equity += monthly - thisMonthsInterest; // The rest goes to equity
    g.lineTo(paymentToX(p), amountToY(equity)); // Line to this point
  }window.CP.exitedLoop(0);
  g.lineTo(paymentToX(payments), amountToY(0)); // Line back to X axis
  g.closePath(); // And back to starting point
  g.fillStyle = "#40FD65";
  g.fill(); // Fill area under curve

  // Loop again, as above, but chart loan balance as a black line
  var bal = principal;
  g.beginPath();
  g.moveTo(paymentToX(0), amountToY(bal));
  for (var p = 1; p <= payments; p++) {if (window.CP.shouldStopExecution(1)) break;
    var thisMonthsInterest = bal * rate;
    bal -= monthly - thisMonthsInterest; // The rest goes to equity
    g.lineTo(paymentToX(p), amountToY(bal)); // Draw line to this point
  }window.CP.exitedLoop(1);

  g.lineWidth = 2;
  g.strokeStyle = "#444";
  g.stroke(); // Draw the balance curve

  // Now make yearly tick marks and year numbers on X axis
  g.textAlign = "center"; // Center text over ticks
  g.fillStyle = "#444";
  g.font = "0.6em 'Open Sans'";
  var y = amountToY(0); // Y coordinate of X axis
  for (var year = 1; year * 12 <= payments; year++) {if (window.CP.shouldStopExecution(2)) break; // For each year
    var x = paymentToX(year * 12); // Compute tick position
    g.fillRect(x - 0.5, y - 3, 1, 3); // Draw the tick
    if (year === 1) g.fillText("Year", x, y - 5); // Label the axis
    if (year % 5 === 0 && year * 12 !== payments) // Number every 5 years
      g.fillText(String(year), x, y - 5);
  }

  // Mark payment amounts along the right edge
  window.CP.exitedLoop(2);g.textAlign = "right"; // Right-justify the text
  g.textBaseline = "middle"; // Center it vertically
  var ticks = [monthly * payments, principal]; // The two points we'll mark
  var rightEdge = paymentToX(payments); // X coordinate of Y axis
  for (var i = 0; i < ticks.length; i++) {if (window.CP.shouldStopExecution(3)) break; // For each of the 2 points
    var y = amountToY(ticks[i]); // Compute y position of tick
    g.fillRect(rightEdge - 3, y - 0.5, 3, 1); // Draw the tick mark
    g.fillText(String(formatNumber(ticks[i]), 2), rightEdge - 5, y); // And label it
  }window.CP.exitedLoop(3);
}

function formatNumber(num, decimals) {
  return num.toFixed(decimals).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
  // http://blog.tompawlak.org/number-currency-formatting-javascript
}
//# sourceURL=pen.js
    </script>


</body></html>